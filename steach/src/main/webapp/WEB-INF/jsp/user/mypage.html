<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>메인</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
        crossorigin="anonymous">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="./mypage.css">
    <link rel="stylesheet" href="../help_member.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
</head>

<body>
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="pull-left home"><a href="#"><i class="fas fa-home"></i></a></li>
                <li class="pull-left myClassName"><a href="#">STEACH</a></li>
                <li class="pull-right dropdown myNotification">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fas fa-user"></i></a>
                    <ul class="dropdown-menu myNotificationMenu">
                        <li><a href="#">마이페이지</a></li>
                        <li class="divider"></li>
                        <li><a href="#">마이드라이브</a></li>
                        <li class="divider"></li>
                        <li><a href="#">로그아웃</a></li>
                    </ul>
                </li>
                <li class="pull-right myInformation"><a href="#"><i class="fas fa-bell"></i></a></li>
                <!-- <li class="pull-right dropdown add">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fas fa-plus"></i></a>
                    <ul class="dropdown-menu addmenu">
                        <li><a href="#" id="joinclass" data-toggle="modal" data-target="joincodeinput">수업 참여하기</a></li>
                        <li class="divider"></li>
                        <li><a href="#" id="addclass" data-toggle="modal">수업 만들기</a></li>
                    </ul>
                </li> -->
            </ul>
        </div>
    </nav>
    <div class="container" style="margin-top: 100px">
        <!-- member_basic_info -->
        <h3>MyPage</h3>
        <div class="member_basic_info">

            <div id="content" class="section_home">
                <div class="column">

                    <!-- 프로필 설정 -->
                    <div class="sh_group">
                        <div class="sh_header">
                            <h2><i class="fas fa-user"></i> 프로필</h2>
                        </div>
                        <div class="sh_content">
                            <dl class="sh_lst">
                                <dt class="blind">프로필 사진</dt>
                                <dd class="pic_desc">
                                    <a href="#">
                                        <img id="profile" class="media-object" src="../profile.jpg" alt="프로필" />
                                    </a>
                                    <div id="drop">

                                    </div>
                                </dd>
                                <dt class="blind">&nbsp;</dt>
                                <dd class="intro_desc">&nbsp;</dd>
                                <dt class="nic_tit">이름</dt>
                                <dd class="nic_desc">홍길동</dd>
                            </dl>
                        </div>
                        <br>
                        <div class="fileBox text-center">
                            <label for="uploadBtn" class="btn_file">프로필 사진 수정</label>
                            <input type="file" name="uploadFile" id="uploadBtn" class="uploadBtn" />
                        </div>
                    </div>
                    <br>
                    <!-- 강의중인 클래스 -->
                    <div class="sh_group">
                        <div class="sh_header">
                            <h2><i class="fas fa-book-reader"></i> 강의중인 클래스</h2>
                            
                        </div>
                        <div class="sh_content">
                            <table class="table">
                                <thead>
                                    <tr>
                                    <th>
                                        클래스명
                                    </th>
                                    <th>
                                        과정기간
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><a href="#">응용소프트웨어</a></td>
                                        <td class="time">2018.11.11　~　2018.11.11</td>
                                    </tr>
                                    <tr>
                                        <td><a href="#">웹앱만들기</a></td>
                                        <td>2018-11-11　~　2018-11-11</td>
                                    </tr>
                                </tbody>

                            </table>

                        </div>
                    
                    </div>
                </div>
                <div class="column">
                    <!-- 일반아이디 연락처 -->
                    <div class="sh_group ">
                        <div class="sh_header">
                            <h2><i class="fas fa-user"></i> 정보</h2>
                            <!-- <a href="javascript:toggle('userInfo');" onclick="clickcr(this,'imn.cnthelp','','',event);" class="link_help"><i id="i_userInfo" class="spico ico_arr3_dn">도움말</i></a>
							<p id="p_userInfo" class="contxt" style="display:none">
						     	  네이버에서 <em>중요 내용을 알려드릴 때 사용</em>하는 연락처 정보입니다.
						      보다 안전한 정보 보호를 위해 등록된 연락처의 일부만 보여드립니다.
						      이름 및 정확한 연락처 정보는 수정 화면에서 확인 가능합니다.
						     </p> -->
                        </div>
                        <div class="sh_content">
                            <dl class="sh_lst2">
                                <dt>이메일아이디</dt>
                                <dd>lucky_23@naver.com</dd>
                                <dt>비밀번호</dt>
                                <dd>
                                    <button class="btn btn-default btn-sm active" id="modipassbtn">수정</button>
                                </dd>
                                <dt>휴대전화</dt>
                                <dd class="phonenum1">01012345678　<button class="btn btn-default btn-sm active" id="modiphonebtn">수정</button></dd>
                                <dd class="phonenum2" style="display: none"><input type="text" class="inputphone" placeholder="번호를 입력하세요">
                                        <button class="btn btn-default btn-xs active" id="modiphonecomplete">수정</button>
                                        <button class="btn btn-default btn-xs" id="modiphonecanclebtn">취소</button></dd>
                                <dt>주소</dt>
                                <dd class="addr1">서울시 강남구　<button class="btn btn-default btn-sm active" id="modiaddrbtn">수정</button></dd>
                                <dd class="addr2" style="display: none"><input type="text" class="inputaddr" placeholder="지역을 입력해주세요">
                                    <button class="btn btn-default btn-xs active" id="modiaddrcomplete">수정</button>
                                    <button class="btn btn-default btn-xs" id="modiaddrcanclebtn">취소</button></dd>
                            </dl>
                        </div>
                        <!-- <p class="btn_area_btm"><a href="/user2/help/changeUserInfo.nhn?menu=nid&amp;lang=ko_KR" onclick="clickcr(this,'imn.cntmodify','','',event);" class="btn_model"><b class="btn2">수정</b></a></p> -->
                    </div>
                    <br>
                    <div class="sh_group">
                            <div class="sh_header">
                                <h2><i class="fas fa-book-reader"></i> 수강중인 클래스</h2>
                            </div>
                            <div class="sh_content">
                                <p class="contxt">
                                        현재 수강중인 클래스가 없습니다.
                                </p>
                            </div>
                        
                        </div>

                </div>

                <div class="resize-triggers">
                    <div class="expand-trigger">
                        <div style="width: 955px; height: 50px;"></div>
                    </div>
                    <div class="contract-trigger"></div>
                </div>
            </div>

            


        </div>
        <!-- //member_basic_info -->
    </div>

    <!-- Modal -->
    <div class="modal modal-center fade" id="modipassword" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-center" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="exampleModalCenterTitle"><i class="fas fa-user-cog"></i> 비밀번호 변경하기</h4>

                </div>
                <div class="modal-body">
                    <input type="text" class="form-control" id="pwd1" style="width: 100%" placeholder="현재 비밀번호">
                    <br>
                    <input type="text" class="form-control" id="pwd2" style="width: 100%" placeholder="새로운 비밀번호">
                    <br>
                    <input type="text" class="form-control" id="pwd22" style="width: 100%" placeholder="새로운 비밀번호 확인">
                    <p id="password_message">비밀번호 수정 문구 출력.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="submit_pwd">수정하기</button>
                    <button type="button" class="btn btn-link" data-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>

</body>
<script>
    $('ul.nav li.dropdown').hover(function () {
        $(this).find('.dropdown-menu').stop(true, true).delay(10).fadeIn(200);
    }, function () {
        $(this).find('.dropdown-menu').stop(true, true).delay(10).fadeOut(200);
    });

    $(document).ready(function () {
        $("#modipassbtn").on("click", function () {
            $("#modipassword").modal('toggle')
        });
    });

    $(function () {
        $("#datepicker1, #datepicker2").datepicker();
    });

    // 확장자 제한
    function checkFile(f) {
        // files로 해당 파일 정보 얻기
        var file = f.files;

        // file[0].name 은 파일명
        // 정규식으로 확장자 체크
        if (!/(gif|jpg|jpeg|png)$/i.test(file[0].name)) {
            alert('gif, jpg, png 파일만 선택해 주세요.\n\n현재 파일 : ' + file[0].name);
            return false;
        } else {
            return;
        }
    }
    // 파일
    $("input[type='file']").change(function (e) {
        if (checkFile(this) == false) {
            return;
        }
        var fileReader = new FileReader();
        var conf = null;
        fileReader.readAsDataURL(e.target.files[0]);
        fileReader.onload = function (e) {
            document.getElementById('profile').src = e.target.result;
            // setTimeout(function () {
            //   conf = confirm("수정하시겠습니까?");
            //   if (conf == false) { location.href = "myPage.do"; return; }

            //   var formData = new FormData();
            //   var inputFile = $("input[name='uploadFile']")
            //   var files = inputFile[0].files;
            //   var id = $("#userId").val();
            //   formData.append("uploadFile", files[0]);
            //   $.ajax({
            //     url: "/cocain/user/profileImg.do",
            //     processData: false,
            //     contentType: false,
            //     data: formData,
            //     type: "POST"
            //   })
            //     .done(function (result) {
            //       location.href = "myPage.do";
            //     });
            // }, 10)
        }
    });
    // 파일 드래그 앤 드롭
    var drop = document.getElementById('drop');
    var fileInput = document.getElementById('uploadBtn');

    drop.ondragover = drop.ondragenter = function (e) {
        e.preventDefault();
    };
    drop.ondrop = function (e) {
        fileInput.files = e.dataTransfer.files;
        e.preventDefault();
    };
    // 번호 주소 수정
    $("#modiphonebtn").click(function(){
        $(".phonenum1").css("display", "none");
        $(".phonenum2").css("display", "block");
    });
    $("#modiphonecanclebtn").click(function(){
        $(".phonenum2").css("display", "none");
        $(".phonenum1").css("display", "block");
    })
    $("#modiaddrbtn").click(function(){
        $(".addr1").css("display", "none");
        $(".addr2").css("display", "block");
    });
    $("#modiaddrcanclebtn").click(function(){
        $(".addr2").css("display", "none");
        $(".addr1").css("display", "block");
    })

    $(document).on("click", '#submit_password', function () {
    	var $pwd1 = $('#pwd1');
    	var $pwd2 = $('#pwd2');
        var $pwd22 = $('#pwd22');

    	if  ( !$pwd1.val() )
        {
    		$("#password_message").text("현재 비밀번호를 입력해주세요.");
	        $pwd1.focus();
	        return ;
	    }
    	if  ( !$pwd2.val() )
        {
    		$("#password_message").text("새로운 비밀번호를 입력해주세요.");
	        $pwd2.focus();
	        return ;
	    }
    	if  ( !$pwd22.val() )
        {
    		$("#password_message").text("새로운 비밀번호를 한번더 입력해주세요.");
	        $pwd22.focus();
	        return ;
	    }
        check_password();
        check_password1();

    });
    // 비번체크
    var passwordChkResult = false;
var password1ChkResult = false;
    function check_password()
    {
    	var password = $('#pwd2').val();
        var old_password = $('#pwd1').val();

        // reset password1
        //$('#password1').val('');
        $("#password_message").text('');
        password1ChkResult = false;

        // check password
                    var pwdChk = chkPassword_change(password, "lucky23", old_password);
        
        passwordChkResult = pwdChk['flag'];
        password1ChkResult = pwdChk['flagR'];
        $("#password_message").text(pwdChk['msg']);
    }
    
</script>

</html>