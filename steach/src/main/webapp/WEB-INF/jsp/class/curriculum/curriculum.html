<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- full calendar -->
    <link href='../fullcalendar-3.9.0/fullcalendar.css' rel='stylesheet' />
	<link href='../fullcalendar-3.9.0/fullcalendar.print.css' rel='stylesheet' media='print' />
	<script src='../fullcalendar-3.9.0/lib/moment.min.js'></script>
	<script src='../fullcalendar-3.9.0/fullcalendar.min.js'></script>
	<script src='../fullcalendar-3.9.0/locale-all.js'></script>
	<script src="../fullcalendar-3.9.0/demos/test.js"></script>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="./header.css">
    <link rel="stylesheet" href="./curriculum.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <title>study</title>
</head>
<body>
    <nav class="navbar navbar-default">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="pull-left home"><a href="#"><i class="fas fa-home"></i></a></li>
                    <li class="pull-left myClassName"><a href="#">클래스명</a></li>
                    <li class="classCurriculum"><a href="#">커리큘럼</a></li>
                    <!-- <li class="classCourse"><a href="#">수업</a></li> -->
                    <li class="dropdown classCourse">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">수업</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">과제제출</a></li>
                        </ul>
                    </li>
                    <li class="dropdown classUser">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">사용자</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">출결현황</a></li>
                            <li class="divider"></li>
                            <li><a href="#">조별활동</a></li>
                        </ul>
                    </li>
                    <li class="nbsp">　　　　　　</li>
                    <li class="pull-right dropdown myNotification">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fas fa-user"></i></a>
                        <ul class="dropdown-menu myNotificationMenu">
                            <li><a href="#">마이페이지</a></li>
                            <li class="divider"></li>
                            <li><a href="#">마이드라이브</a></li>
                            <li class="divider"></li>
                            <li><a href="#">로그아웃</a></li>
                        </ul>
                    </li>
                    <li class="pull-right myInformation"><a href="#"><i class="fas fa-bell"></i></a></li>
                </ul>
            </div>
        </nav>

        <!--page-->
        <div class="container-fluid">
            <div class="row">
                <!-- bg -->
                <div class="bg-section"></div>
                <div>
                    <button id="prev" type="button" class="btn"><</button>
                    <button id="next" type="button" class="btn">></button>
                
                </div>

                <div class="col-md-8 col-md-offset-2">
                    
                    <div class="accordion" role="tablist">
                        <!-- calendar -->
                        <div class="card">
                            <div class="card-header" role="tab" id="headingOne">
                                <div class="title">　
                                    <a data-toggle="collapse" href="#collapseOne">수업계획표</a>
                                </div>
                            </div>

                            <div id="collapseOne"  role="tabpanel" class="collapse in">
                            <div class="card-body">
                                <div id="calendar"></div>
                                <div class="calendar-setting">
                                    <button type="button" class="btn">저장</button>
                                    <button type="button" class="btn">초기화</button>
                                </div> 
                            </div>
                            </div>
                        </div>

                        <div class="card">
                                <div class="card-header" role="tab" id="headingOne">
                                    <div class="title">　
                                        <a data-toggle="collapse" href="#collapseOne">자리배치도</a>
                                    </div>
                                </div>
    
                                <div id="collapseOne"  role="tabpanel" class="collapse">
                                <div class="card-body">
                                    <!-- seat-->
                                    <div class="seat-section">
                                        <div class="class"></div>
                                        <div class="list">   
                                            <div class="ui-state-default namecard">  
                                                <div class="name">홍길동</div>     
                                            </div>
                                            <div class="ui-state-default namecard">사람2</div>
                                            <div class="ui-state-default namecard">사람3</div>
                                            <div class="ui-state-default namecard">사람4</div>
                                            <div class="ui-state-default namecard">사람5</div>
                                            <div class="ui-state-default namecard">사람6</div>
                                            <div class="ui-state-default namecard">사람7</div>
                                            <div class="ui-state-default namecard">사람8</div>
                                        

                                        </div>
                                    </div>
                                    <div class="seat-setting">
                                        <button type="button" class="btn">저장</button>
                                        <button type="button" class="btn">초기화</button>
                                    </div> 
                                </div>
                                </div>
                            </div>
                    </div>


                </div>

            </div>
        </div><!--row end -->


        <!-- seat -->




        <script>
        /*  header js */
        $('ul.nav li.dropdown').hover(function() {
            $(this).find('.dropdown-menu').stop(true, true).delay(10).fadeIn(200);
        }, function() {
            $(this).find('.dropdown-menu').stop(true, true).delay(10).fadeOut(200);
        });

        /*bg */
        var i =1; 
        $("#prev").click(function(){
            if(i>1){
                i--;
                $(".bg-section").css({
                    "background":"url(./bg/bg"+i+".jpg)"
                });
            }
        })
        $("#next").click(function(){
            if(i<9){
                i++;
                $(".bg-section").css({
                    "background":"url(./bg/bg"+i+".jpg)"
                });
            }
        })



        /* accordion */
        $('.collapse').collapse();

        /* full Calendar */
        var cal = "";
        var initialLocaleCode = 'ko';
        $(document).ready(function() {
            console.log(eventArray);

            cal = $('#calendar').fullCalendar(
              
          {
            header: {
              left: 'prev,next today',
              center: 'title',
              right: 'month,agendaWeek,listMonth'
            },
            defaultDate: '2018-11-15',
            navLinks: true, // can click day/week names to navigate views
      
           // weekNumbers: true,
            weekNumbersWithinDays: true,
            weekNumberCalculation: 'ISO',
            locale: initialLocaleCode,
            editable: true,
            eventLimit: true, // allow "more" link when too many events
            selectable:true,
            select:function(start,end,jsEvent,view){
                var obj={};
                var title = prompt("제목 입력하세요");
                if(title){
                  obj.title = title;
                  obj.start = start;
                  obj.end = end;
                  eventArray.push(obj);
                }

                $("#calendar").fullCalendar('renderEvent',obj);
                console.log(eventArray)
                //console.log(eventArray.length)
                console.log(eventArray[eventArray.length-1].start._d);
                var m = eventArray[eventArray.length-1].start._d;
                console.log(m);
            },
            events: function(start,end,timezone,callback){
                callback(eventArray);
            },

            eventClick: function(event){
               var result = confirm("삭제하시겠습니까?");
               if(result){
              //eventArray에서 제거 
                const itemToFind = eventArray.find(function(item) {return item.title === event.title})
                const idx = eventArray.indexOf(itemToFind) 
                if (idx > -1) eventArray.splice(idx, 1);
                console.log(eventArray);
                
                //화면에서제거
                $("#calendar").fullCalendar('removeEvents',event._id);
               }
               
            },

          }
          
          );
      
        });
        
    </script>
</body>
</html>